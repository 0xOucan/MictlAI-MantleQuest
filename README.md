# 💀 MictlAI 💀: AI-Powered Cross-Chain Bridge

[![MictlAI Demo Video](https://img.youtube.com/vi/-fRQruMqX_Y/0.jpg)](https://www.youtube.com/watch?v=-fRQruMqX_Y)

> 🏆 **Cookathon Project** - [View Submission](https://taikai.network/ethcdm/hackathons/ethcdm-2/projects/cma9asf3z0fw2u9xxkax97kvm/idea)  
> 🛠️ **Tracks**: Mantle, $MXNB, ZKsync  
> 📂 **Repository**: [GitHub](https://github.com/0xOucan/MictlAI)
> 🔥 **Mantle Quest Edition**: [MictlAI: The Mantle Quest](https://github.com/0xOucan/MictlAI-MantleQuest)

## 📑 Table of Contents
- [The MictlAI Legend](#-the-mictlai-legend)
- [MictlAI: The Mantle Quest](#-mictlai-the-mantle-quest)
- [Features](#-features)
- [Mantle Network Integrations](#-mantle-network-integrations)
- [🤖 NEBULA AI Integration](#-nebula-ai-integration)
- [Architecture](#-architecture)
- [Getting Started](#-getting-started)
- [Contract Information](#-contract-information)
- [Supported Networks](#-supported-networks)
- [Backend Integration](#-backend-integration)
- [Core Features](#-core-features)
- [Web Interface](#-web-interface)
- [Key Components](#-key-components)
- [Security](#-security)
- [Cross-Chain Bridge Features](#-cross-chain-bridge-features)
- [Technical Documentation](#-technical-documentation)
- [Development History](#-development-history)
- [Contributing](#-contributing)
- [Contact](#-contact)
- [License](#-license)

## 🏺 The MictlAI Legend

In ancient Aztec mythology, **Mictlantecuhtli ruled Mictlán**, the underworld—a realm where souls journeyed after death, navigating nine challenging levels to reach their final destination.

Today, **💀MictlAI💀** emerges as a digital guardian of the blockchain underworld, facilitating seamless passage between disparate realms. Just as Mictlantecuhtli guided souls through Mictlan's levels, **MictlAI guides your assets across the complex landscape of multiple blockchains.**

The journey of your tokens—from **Base to Arbitrum, Mantle to zkSync Era**—mirrors the soul's journey through Mictlan's territories. With MictlAI as your guide, these journeys become seamless, secure, and swift.

Where **traditional bridges have failed through hacks and exploits**, **💀MictlAI💀**'s atomic swap mechanism creates a **direct, trustless pathway between blockchain worlds**—a pathway guarded by the wisdom of AI and the security of decentralized protocols.

## 🚀 MictlAI: The Mantle Quest

**[MictlAI: The Mantle Quest](https://github.com/0xOucan/MictlAI-MantleQuest)** is an enhanced version of the original MictlAI that includes all the same core functionalities plus exciting new integrations specifically designed for the Mantle ecosystem:

### 🆕 Mantle-Specific Features
- **🤖 NEBULA AI Integration**: Advanced AI assistant powered by thirdweb's Nebula AI platform
- **🌳 Treehouse Protocol**: Stake cmETH tokens on Mantle network
- **🏦 Lendle Protocol**: Lending and borrowing MNT and USDT with collateral management
- **🔄 Merchant Moe**: Advanced DEX operations for MNT/USDT swaps
- **🎯 Init Capital**: Yield farming and liquidity optimization strategies

This Mantle Quest edition maintains all the cross-chain bridging capabilities of the original while adding deep Mantle network integration for DeFi operations, yield strategies, and AI-powered portfolio management.

## 🌟 Features

- 🌉 Seamless cross-chain transfers between Base, Arbitrum, Mantle, and zkSync Era
- ⚛️ Bidirectional atomic swaps for trustless token exchanges
- 💬 Natural language AI chat interface for cross-chain operations
- **🤖 Advanced NEBULA AI Integration for intelligent DeFi assistance**
- **🌳 Treehouse Protocol staking integration**
- **🏦 Lendle Protocol lending and borrowing**
- **🔄 Merchant Moe DEX operations**
- 👛 External wallet support with secure transaction handling
- 🔄 Real-time transaction monitoring and status tracking
- 💰 Real-time wallet balance tracking with USD conversion
- 📱 Responsive design for desktop and mobile devices
- 🔒 No private key storage - transactions require explicit wallet approval
- 🤖 Intelligent AI assistance for navigating blockchain interoperability
- 📈 Real-time market insights for informed decisions

## 🛡️ Mantle Network Integrations

MictlAI provides comprehensive support for the Mantle ecosystem through specialized action providers:

### 🤖 NEBULA AI Integration

**NEBULA AI** is the crown jewel of our Mantle integration, powered by thirdweb's advanced AI platform:

- **🗣️ Natural Language DeFi**: Interact with Mantle protocols using plain English
- **📊 Portfolio Analysis**: AI-powered insights about your DeFi positions
- **💡 Strategy Recommendations**: Get personalized yield optimization suggestions
- **🔍 Transaction Analysis**: Understand complex DeFi operations with AI explanations
- **⚡ Real-time Assistance**: Instant help with Mantle protocol interactions

#### Example NEBULA Commands:
```
"Analyze my Mantle portfolio and suggest optimizations"
"What's the best yield strategy for my MNT tokens?"
"Explain my recent Lendle transaction"
"Help me optimize my Treehouse staking position"
```

### 🌳 Treehouse Protocol Integration
- **Stake cmETH tokens** on Mantle network
- **Automated staking rewards** tracking and optimization
- **Direct approval and staking** in single transactions
- **Withdraw staked positions** with health factor monitoring

### 🏦 Lendle Protocol Integration
- **Supply MNT as collateral** for lending positions
- **Deposit USDT** for yield generation
- **Monitor health factors** and liquidation risks
- **Automated position management** with AI assistance

### 🔄 Merchant Moe Integration
- **Swap MNT ⟷ USDT** with optimal routing
- **Dynamic slippage protection** and price impact analysis
- **Automated token approvals** for seamless trading
- **Real-time price feeds** and market insights

## 🤖 NEBULA AI Integration

The **NEBULA AI integration** represents a breakthrough in blockchain user experience, bringing conversational AI directly to DeFi operations on Mantle:

### 🎯 Core Capabilities
- **🗣️ Natural Language Processing**: Chat about blockchain operations in plain English
- **⚡ Transaction Execution**: Execute complex DeFi operations through conversation
- **📊 Portfolio Analysis**: AI-powered insights and strategy recommendations
- **🔍 Real-time Queries**: Query blockchain data using natural language
- **💡 Strategic Guidance**: Receive AI-generated optimization suggestions

### 🛠️ Technical Features
- **Chain-Specific**: Optimized for Mantle network (Chain ID: 5000)
- **Protocol Integration**: Works seamlessly with Lendle, Treehouse, and Merchant Moe
- **Session Management**: Intelligent conversation context and memory
- **Error Handling**: Graceful degradation with user-friendly messages
- **Security**: Secure API integration with no private key exposure

### 💬 Example Interactions
```
User: "What's the best way to use my 100 MNT tokens?"
NEBULA: "I can help optimize your MNT! Here are some strategies:
1. Supply to Lendle for 8.5% APY as collateral
2. Swap 50 MNT to USDT on Merchant Moe for diversification
3. Keep 20 MNT for gas and future opportunities
Would you like me to execute any of these strategies?"

User: "Yes, supply 80 MNT to Lendle"
NEBULA: "Perfect! I'll help you supply 80 MNT to Lendle Protocol..."
```

## 🏗️ Architecture

The MictlAI project consists of two main components:

### Backend (celo-mind-dn)
```
celo-mind-dn/
├── src/                    # Source code
│   ├── action-providers/   # Cross-chain actions implementation
│   ├── api-server.ts       # API server for frontend integration
│   ├── chatbot.ts          # Core AI agent functionality
│   ├── services/           # Blockchain services
│   ├── telegram-interface.ts # Telegram bot interface
│   └── utils/              # Utility functions
├── dist/                   # Compiled JavaScript
├── node_modules/           # Dependencies
├── README.md               # Backend documentation
├── package.json            # Dependencies and scripts
└── tsconfig.json           # TypeScript configuration
```

### Frontend (celo-mind-web)
```
celo-mind-web/
├── src/                    # Source code
│   ├── components/         # React UI components
│   │   ├── ChatInterface.tsx # AI chat interface
│   │   ├── WalletBalances.tsx # Wallet balance display
│   │   └── TransactionMonitor.tsx # Transaction monitoring UI
│   ├── providers/          # Context providers
│   ├── services/           # API and blockchain services
│   └── App.tsx             # Main application component
├── public/                 # Static assets
├── build/                  # Production build
├── node_modules/           # Dependencies
├── README.md               # Frontend documentation
└── package.json            # Dependencies and scripts
```

## 🚀 Getting Started

### Prerequisites
- Node.js v16+
- npm v7+
- A browser extension wallet (MetaMask, Rabby, etc.) connected to Base, Arbitrum, Mantle, or zkSync Era networks

### Installation

```bash
# Clone both repositories
git clone https://github.com/0xOucan/celo-mind-dn.git
git clone https://github.com/0xOucan/celo-mind-web.git

# Use the launch script to start both services
cp celo-mind-dn/launch.sh ./
chmod +x launch.sh
./launch.sh
```

The launch script automatically:
1. Installs dependencies for both repositories
2. Starts the backend API server
3. Starts the frontend development server
4. Connects them together with proper configuration

### Environment Setup

Required in your `.env` file:
```
OPENAI_API_KEY=your_openai_api_key_here
WALLET_PRIVATE_KEY=your_wallet_private_key_here  # Only needed for CLI/Telegram modes
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here  # Optional, for Telegram mode

# For frontend
VITE_API_URL=http://localhost:4000
```

> **Security Update**: With the latest version, private keys are no longer required for the web interface. All transactions are now signed directly using your browser extension wallet, significantly improving security.

## 🔗 Contract Information

### 📍 Network Contracts
- **Base Network**: `0xabc123...` (XOC token contract)
- **Arbitrum Network**: `0xdef456...` (MXNB token contract)
- **Mantle Network**: `0xghi789...` (USDT token contract)
- **zkSync Era Network**: `0xjkl012...` (USDT token contract)

#### 📊 Contract Statistics
- **Networks**: Base, Arbitrum, Mantle, and zkSync Era
- **Transaction Types**: Cross-chain atomic swaps, token transfers
- **View on Explorers**: [BaseScan](https://basescan.org), [ArbiScan](https://arbiscan.io), [MantleScan](https://mantlescan.xyz), [zkScan](https://era.zksync.network)

## 🛠️ Supported Networks

MictlAI seamlessly connects multiple blockchain networks:

### Base
- Transfer XOC tokens to Arbitrum (receive MXNB)
- Transfer XOC tokens to Mantle (receive USDT)
- Transfer XOC tokens to zkSync Era (receive USDT)

### Arbitrum
- Transfer MXNB tokens to Base (receive XOC)
- Transfer MXNB tokens to Mantle (receive USDT)
- Transfer MXNB tokens to zkSync Era (receive USDT)

### Mantle
- Transfer USDT tokens to Base (receive XOC)
- Transfer USDT tokens to Arbitrum (receive MXNB)
- Transfer USDT tokens to zkSync Era (receive USDT)

### zkSync Era
- Transfer USDT tokens to Base (receive XOC)
- Transfer USDT tokens to Arbitrum (receive MXNB)
- Transfer USDT tokens to Mantle (receive USDT)

## 🔌 Backend Integration

This web interface connects to the MictlAI backend API to process commands and execute blockchain operations.

### Communication Flow

1. **User Interface**: The web frontend collects user inputs through a conversational interface
2. **API Requests**: Frontend sends natural language commands to the `/api/agent/chat` endpoint
3. **AI Processing**: Backend processes commands using advanced AI and Agent Orchestration
4. **Blockchain Operations**: Backend creates transaction requests for the frontend wallet to sign
5. **Transaction Handling**: Frontend monitors and processes pending transactions with the connected wallet
6. **Response Handling**: Frontend displays results and updates wallet balances

### API Architecture

The API server is implemented in `src/api-server.ts` and provides:

- **Express Backend**: Lightweight and fast Node.js server
- **CORS Support**: Cross-origin requests for frontend integration
- **Streaming Responses**: Real-time updates during AI processing
- **Error Handling**: Robust error reporting for debugging
- **Wallet Connection**: Secure connection of browser extension wallets
- **Transaction Management**: Pending transaction tracking and status updates

## 🔑 Core Features

### Cross-Chain Operations
- Initiate cross-chain transfers with atomic swap security
- Monitor transaction status across all networks
- Verify transaction completion with explorer links

### Token Operations
- Check token balances with USD conversion
- Transfer tokens between wallets on the same network
- Approve token spending for cross-chain operations

### Bridge Operations
- Initiate atomic swaps between networks
- Verify transaction completion on both sides
- Recover from failed transactions with safety mechanisms

### Operating Modes
- 💬 Interactive web interface with AI chat
- 🤖 CLI mode for command-line operations
- 📱 Telegram bot interface for mobile access

## 🌐 Web Interface

MictlAI's web interface provides:

- 💬 Interactive AI chat interface for cross-chain commands
- 💰 Real-time wallet balance tracking with USD conversion
- 🌓 Light/Dark theme toggle with system preference detection
- 📱 Responsive design for desktop and mobile
- 🔒 Browser extension wallet integration (MetaMask, Rabby, etc.)
- 🔄 Transaction monitoring and signing directly from your wallet

## 🧩 Key Components

### 1. WalletContext
The central wallet management system provides:
- Wallet connection state management
- Backend synchronization
- Address tracking and formatting
- Integration with Privy authentication

### 2. TransactionMonitor
Monitors and processes transactions by:
- Polling for pending transactions
- Creating wallet clients for signing
- Network validation and switching
- Transaction status tracking
- Error handling with helpful messages

### 3. WalletBalances
Real-time balance tracking with:
- Direct blockchain data fetching with viem
- USD conversion with market prices
- Visual indicators for token types
- One-click refresh functionality
- Blockchain explorer integration for verification

### 4. LiquidityMonitor
Escrow wallet liquidity tracking with:
- Displays available liquidity of specific tokens (MXNB, USDT, XOC)
- Monitors balances across multiple chains (Base, Arbitrum, Mantle, zkSync)
- Direct link to Debank profile for detailed analysis

## 🔐 Security

### Smart Contract Security
- ✅ Proven contract track record
- 🔍 Continuous monitoring of all contract interactions
- 🛡️ Automated security checks before transactions

### User Security
- 🔒 No private key storage for web users - browser wallets only
- ✅ Explicit transaction approval required through wallet
- 🛡️ Cross-chain transaction verification
- 🔍 Clear transaction status monitoring
- 🚨 Comprehensive error handling
- 🔐 Network validation to ensure correct network connection

### Enhanced Backend Security
- 🔑 Secure transaction management with dedicated transaction utilities
- 📋 Centralized logging system for monitoring and troubleshooting
- 🚦 API rate limiting to prevent abuse and denial-of-service attacks

## 🔄 Cross-Chain Bridge Features

MictlAI implements a robust cross-chain bridging system:

1. **Multiple Networks**: Supports bridging between Base, Arbitrum, Mantle, and zkSync Era networks
2. **Multiple Tokens**: Transfer XOC, MXNB, and USDT tokens across chains
3. **Atomic Swaps**: Trustless cross-chain token swaps using an escrow mechanism
4. **Real-time Status**: Monitor swap progress across chains in real-time
5. **Fee Transparency**: Clear display of bridge fees (0.5%) and final received amount
6. **Explorer Integration**: Direct links to view transactions on BaseScan, ArbiScan, MantleScan, and zkSync Explorer

### Supported Bridges

| From | To | Tokens |
|------|----|----|
| Base | Arbitrum | XOC → MXNB |
| Arbitrum | Base | MXNB → XOC |
| Base | Mantle | XOC → USDT |
| Mantle | Base | USDT → XOC |
| Arbitrum | Mantle | MXNB → USDT |
| Mantle | Arbitrum | USDT → MXNB |
| Base | zkSync Era | XOC → USDT |
| zkSync Era | Base | USDT → XOC |
| Arbitrum | zkSync Era | MXNB → USDT |
| zkSync Era | Arbitrum | USDT → MXNB |
| Mantle | zkSync Era | USDT → USDT |
| zkSync Era | Mantle | USDT → USDT |

## 📚 Technical Documentation

### Protocol Examples

#### Bridge Commands
```
transfer 5 XOC from Base to Arbitrum
transfer 10 MXNB from Arbitrum to Base
transfer 5 XOC from Base to Mantle
transfer 1 USDT from Mantle to Base
transfer 10 MXNB from Arbitrum to Mantle
transfer 2 USDT from Mantle to Arbitrum
transfer 0.5 XOC from Base to zkSync Era
transfer 1 USDT from zkSync Era to Base
check status of transaction 0x123...
view balance on Base
view balance on Arbitrum
view balance on Mantle
view balance on zkSync Era
```

### Interface Examples

```
### 💰 **Complete Portfolio Overview** 💰
**Address**: `0x9c77c6fafc1eb0821F1De12972Ef0199C97C6e45`  
**Total Portfolio Value**: **$4.47 USD**

#### 💵 **Token Balances on Base** 💼
- 🟡 **XOC**: 1.32 ($0.66)

#### 💵 **Token Balances on Arbitrum** 💼
- 💵 **MXNB**: 0.28 ($0.28)

#### 💵 **Token Balances on Mantle** 💼
- 💵 **USDT**: 0.5 ($0.5)

#### 💵 **Token Balances on zkSync Era** 💼
- 💵 **USDT**: 1.0 ($1.0)
```

## 📝 Development History

### Backend Repository (celo-mind-dn)
- **Commit History**: [View All Commits](https://github.com/0xOucan/celo-mind-dn/commits/MictlAI/)
- **First MictlAI Commit**: [MictlAI Hola Mictlán](https://github.com/0xOucan/celo-mind-dn/commit/2ac63f0db5548f83f3edc70f71f42b5be79d0b56) - This commit marked the transformation of the project into MictlAI, including the implementation of cross-chain atomic swaps.

### Frontend Repository (celo-mind-web)
- **Commit History**: [View All Commits](https://github.com/0xOucan/celo-mind-web/commits/MictlAI/)
- **First MictlAI Commit**: [MictlAI Interface Initial Implementation](https://github.com/0xOucan/celo-mind-web/commit/5a869181adea6f52ded957bdfcedf61a9a8c9203) - Initial implementation of the MictlAI web interface with AI chat and cross-chain bridging capabilities.

## 👨‍💻 Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## 📧 Contact

- Twitter: [@0xoucan](https://x.com/0xoucan)

## 📄 License

This project is licensed under the MIT License. See [LICENSE](LICENSE) file for details.
